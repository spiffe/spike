<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://spike.ist/main.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="icon" href="https://spike.ist/assets/spike-favicon-16x16.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> SPIKE | SPIKE Security Model </title>
</head>
<body>

<main>
    
    <nav>
  <script>
    fetch('https://api.github.com/repos/spiffe/spike/releases/latest')
        .then(response => response.json())
        .then(data => {
            const release = document.getElementById('release');
            const icon = '<i class="bx bx-package"></i>';
            release.href = data.name ? data.html_url : 'https://api.github.com/repos/spiffe/spike/releases';
            release.innerHTML = icon + (data.name ? ' ' + data.name : ' Releases');
        });
</script>
<div id="banner">
    <a href="https://spike.ist">
        <img src="https://spike.ist/assets/spike-banner.png" alt="logo" />
    </a>
    <div id="banner-body">
        <a class="banner-title" href="https://spike.ist">
            SPIKE
        </a>
        <span class="banner-tagline">
            Secure your secrets<br> with SPIFFE.
        </span>
        <a id="release" class="banner-link" href="https://github.com/spiffe/spike/releases">
            <i class='bx bx-package'></i>
        </a>
        <a href="https://github.com/spiffe/spike" class="banner-link">
            <i class='bx bxl-github'></i> GitHub
        </a>

    </div>
</div>
<style>
   /* Banner on top of the nav */
   #banner {
        position: sticky;
        background-color: var(--bg-primary);
        z-index: 100;
        top: 0;
        display: flex;
        flex-direction: row;
        padding: 1rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        margin-bottom: 1rem;
    }

    #banner img {
        width: 100px;
        height: auto;
    }

    #banner-body {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: space-between;
        margin-left: 1rem;
    }

    .banner-title {
        font-size: 1.75rem;
        font-weight: 700;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        margin-bottom: -15px;
        font-family: var(--brand-font-family);
    }
    .banner-tagline {
        font-size: 0.875rem;
        color: var(--text-muted);
        font-style: italic;
    }

    .banner-link {
        display: flex;
        gap: 0.5rem;
        min-width: 84px;
        font-size: 0.875rem;
        font-weight: 300;
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
        background-color: var(--bg-interactive);
        transition: all 0.2s ease;
    }

    .banner-link i {
        font-size: 1.125rem;
        color: var(--spike-blue);
    }

    .banner-link:hover {
        background-color: var(--spike-blue);
    }
</style> <div id="trees">
    <input class="tree-toggle" type="checkbox" id="about"
               />
        <label class="tree-toggle-label "
               for="about">About</label>

        <ul class="subtree">
            <li >
                    <a href="https://spike.ist/about/intro/">About SPIKE</a>
                </li>

                <li >
                    <a href="https://spike.ist/about/project-status/">Project Maturity</a>
                </li>

                </ul>
    <input class="tree-toggle" type="checkbox" id="community"
               />
        <label class="tree-toggle-label "
               for="community">Community</label>

        <ul class="subtree">
            <li >
                    <a href="https://spike.ist/community/hello/">Hello Universe</a>
                </li>

                <li >
                    <a href="https://spike.ist/community/contact/">Contact Us</a>
                </li>

                <li >
                    <a href="https://spike.ist/community/presentations/">Presentations and Demos</a>
                </li>

                </ul>
    <input class="tree-toggle" type="checkbox" id="getting-started"
               />
        <label class="tree-toggle-label "
               for="getting-started">Getting Started</label>

        <ul class="subtree">
            <li >
                    <a href="https://spike.ist/getting-started/quickstart/">SPIKE Quickstart Guide</a>
                </li>

                </ul>
    <input class="tree-toggle" type="checkbox" id="using-spike"
               />
        <label class="tree-toggle-label "
               for="using-spike">Using SPIKE</label>

        <ul class="subtree">
            <li >
                    <a href="https://spike.ist/usage/configuration/">Configuring SPIKE</a>
                </li>

                <li >
                    <a href="https://spike.ist/usage/cli/">SPIKE CLI</a>
                </li>

                </ul>
    <input class="tree-toggle" type="checkbox" id="developing-spike"
               />
        <label class="tree-toggle-label "
               for="developing-spike">Developing SPIKE</label>

        <ul class="subtree">
            <li >
                    <a href="https://spike.ist/development/local-deployment/">SPIKE on Kubernetes</a>
                </li>

                <li >
                    <a href="https://spike.ist/development/bare-metal/">SPIKE on Linux</a>
                </li>

                </ul>
    <input class="tree-toggle" type="checkbox" id="spike-architecture"
               checked/>
        <label class="tree-toggle-label "
               for="spike-architecture">SPIKE Architecture</label>

        <ul class="subtree">
            <li >
                    <a href="https://spike.ist/architecture/system-overview/">System Overview</a>
                </li>

                <li class="active">
                    <a href="https://spike.ist/architecture/security-model/">SPIKE Security Model</a>
                </li>

                
                        
                        
                            <ul id="toc">
                                <li><a href="
                                            https://spike.ist/architecture/security-model/#spike-security-model">SPIKE Security Model</a>
                                        <ul>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#machine-as-the-trust-boundary">Machine as the Trust Boundary</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#authentication-and-communication">Authentication and Communication</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#trust-boundaries">Trust Boundaries</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#threat-model-exceptions">Threat Model Exceptions</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#the-backing-store-is-untrusted">The Backing Store is Untrusted</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#network-isolation-of-spike-keepers">Network Isolation of SPIKE Keepers</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#spike-keeper-shard-distribution-and-disaster-recovery">SPIKE Keeper Shard Distribution and Disaster Recovery</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#key-management">Key Management</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#workload-access">Workload Access</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#administrative-access">Administrative Access</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#multi-admin-support">Multi-Admin Support</a>
                                                    </li>
                                                <li>
                                                        <a href="https://spike.ist/architecture/security-model/#security-of-spike-binaries">Security of SPIKE Binaries</a>
                                                    </li>
                                                </ul>
                                        </li>
                                </ul>
                        <li >
                    <a href="https://spike.ist/architecture/architectural-decision-records/">ADRs</a>
                </li>

                </ul>
    <input class="tree-toggle" type="checkbox" id="tracking"
               />
        <label class="tree-toggle-label "
               for="tracking">Tracking</label>

        <ul class="subtree">
            <li >
                    <a href="https://spike.ist/tracking/changelog/">Changelog</a>
                </li>

                <li >
                    <a href="https://spike.ist/tracking/snapshots/">Documentation Snapshots</a>
                </li>

                </ul>
    <input class="tree-toggle" type="checkbox" id="operations"
               />
        <label class="tree-toggle-label "
               for="operations">Operations</label>

        <ul class="subtree">
            <li >
                    <a href="https://spike.ist/operations/build/">SPIKE Cross-Platform Build</a>
                </li>

                <li >
                    <a href="https://spike.ist/operations/production/">SPIKE Production Setup</a>
                </li>

                <li >
                    <a href="https://spike.ist/operations/recovery/">SPIKE Recovery Procedures</a>
                </li>

                <li >
                    <a href="https://spike.ist/operations/backup/">SPIKE Backup and Restore</a>
                </li>

                <li >
                    <a href="https://spike.ist/operations/release/">SPIKE Relase Management</a>
                </li>

                </ul>
    </div>
<style>
    /* Navigation tree structure */
    #trees {
        padding: 0 1rem;
    }

    .tree-toggle {
        display: none;
    }

    .tree-toggle:checked + .tree-toggle-label + .subtree {
        display: block;
    }

    .tree-toggle-label {
        display: block;
        padding: 0.75rem 1rem;
        margin: 0.25rem 0;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .tree-toggle-label:hover {
        background-color: rgba(0, 0, 0, 0.05);
    }

    .tree-toggle-label::before {
        content: '▸';
        display: inline-block;
        margin-right: 0.5rem;
        transition: transform 0.2s ease;
    }

    .tree-toggle:checked + .tree-toggle-label::before {
        transform: rotate(90deg);
    }

    .subtree {
        display: none;
        margin: 0;
        padding: 0 0 0 1rem;
        list-style: none;
    }

    .subtree li {
        margin: 0.25rem 0;
    }

    .subtree li a {
        display: block;
        padding: 0.5rem 1rem;
        text-decoration: none;
        border-radius: 4px;
        font-size: 0.9375rem;
        transition: all 0.2s ease;
    }

    .subtree li a:hover {
        background-color: rgba(0, 0, 0, 0.05);
    }

    .subtree li.active a {
        font-weight: 600;
        background-color: rgba(0, 0, 0, 0.05);
    }

    /* Table of contents styling */
    #toc {
        margin: 0.5rem 0 0.5rem 1.5rem;
        padding: 0;
        list-style: none;
        font-size: 0.875rem;
    }

    #toc li {
        margin: 0.25rem 0;
    }

    #toc li a {
        padding: 0.375rem 0.75rem;
        opacity: 0.8;
    }

    #toc li a:hover {
        opacity: 1;
    }

    #toc ul {
        margin: 0.25rem 0 0.25rem 1rem;
        padding: 0;
        list-style: none;
    }
</style>
</nav>
<style>
  nav {
    position: sticky;
    width: 300px;
    height: 100vh;
    top: 0;
    max-height: 100vh;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
    z-index: 100;
    box-shadow: 5px 0 20px var(--shadow-color);
    border-right: 1px solid var(--border-color);
    transition: transform 0.4s ease-in-out;
    background-color: var(--bg-primary);
  }

  nav::-webkit-scrollbar {
    width: 8px;
  }

  nav::-webkit-scrollbar-track {
    background: transparent;
  }

  nav::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    border: 2px solid transparent;
  }

  @media (max-width: 1300px) {
    .nav-toggle {
      display: none;
    }

    nav {
      position: fixed;
      transform: translateX(-100%);
      width: 85%;
      max-width: 300px;
      height: calc(100vh - 57px);
      top: 57px;
    }

    nav.active {
      transform: translateX(0);
    }
  }
</style>


    <div class="content">
        <div class="header">
  <div class="header-content">
    <button
      id="mobile-nav-toggle"
      aria-label="Toggle navigation"
      class="mobile-only"
    >
      <i class="bx bx-menu"></i>
    </button>
    <script>
  document.addEventListener("DOMContentLoaded", () => {
    const searchInput = document.querySelector(".search-input");
    const overlay = document.querySelector(".overlay");
    const searchResults = document.querySelector(".search-results");

    function closeSearch() {
      overlay.style.display = "none";
      searchResults.style.display = "none";
      searchInput.blur();
    }

    function openSearch() {
      overlay.style.display = "block";
      searchResults.style.display = "block";
    }

    searchInput.addEventListener("focus", openSearch);
    overlay.addEventListener("click", closeSearch);
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeSearch();
      }
    });
  });
</script>
<div class="overlay"></div>
<input class="search-input" type="text" placeholder="Search..." />
<div class="search-results">
  <div class="search-results__header">
    <span class="search-results__count">Waiting for input...</span>
  </div>
  <div class="search-results__items"></div>
</div>

<style>
  .search-input {
    width: 100%;
    padding: 0.5rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: var(--bg-interactive);
    color: var(--text-primary);
    font-size: 0.875rem;
    transition: all 0.2s ease;
    z-index: 101;
  }

  .search-input:focus {
    outline: none;
    border-color: var(--spike-blue);
    background-color: var(--bg-primary);
    box-shadow: 0 0 0 2px rgba(var(--spike-blue-rgb), 0.2);
  }

  .search-input::placeholder {
    color: var(--text-muted);
  }

  .overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 100;
  }

  .search-results {
    display: none;
    position: absolute;
    left: 0;
    right: 0;
    top: 100%;
    max-width: 700px;
    margin: 0.5rem auto;
    background: var(--bg-primary);
    border-radius: 8px;
    box-shadow: 0px 4px 8px 3px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--border-color);
    z-index: 102;
  }

  .search-results__header {
    padding: 0.75rem 1rem;
    color: var(--text-muted);
    font-size: 0.875rem;
    border-bottom: 1px solid var(--border-color);
  }

  .search-results__items {
    max-height: 60vh;
    overflow-y: auto;
  }

  .search-results__item {
    display: block;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border-color);
    transition: background-color 0.2s ease;
  }

  .search-results__item:hover {
    background-color: var(--bg-interactive);
  }

  .search-results__title {
    color: var(--spike-blue);
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 0.25rem;
  }

  .search-results__preview {
    color: var(--text-secondary);
    font-size: 0.8125rem;
    line-height: 1.4;
  }

  .search-results__preview b {
    color: var(--spike-dark-green);
    font-weight: 600;
  }

  .search-results__items::-webkit-scrollbar {
    width: 4px;
  }

  .search-results__items::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
  }

  /* Empty state */
  .search-results__empty {
    padding: 2rem 1rem;
    text-align: center;
    color: var(--text-muted);
    font-size: 0.875rem;
  }
</style>

    <a
      href="https://github.com/spiffe/spike"
      target="_blank"
      rel="noopener"
      class="github-star"
    >
      <i class="bx bx-star"></i>
      <span>Star <strong>SPIKE</strong> on <strong>GitHub</strong></span>
    </a>
    <button id="theme-toggle" aria-label="Toggle theme">
      <i class="bx bx-sun light-icon"></i>
      <i class="bx bx-moon dark-icon"></i>
    </button>
  </div>
</div>

<style>
  .header {
    position: sticky;
    top: 0;
    background-color: var(--bg-primary);
    padding: 1rem;
    border-bottom: 1px solid var(--border-color);
    box-shadow: 0 4px 6px -1px var(--shadow-color),
      0 2px 4px -1px var(--shadow-color);
    z-index: 101;
  }

  .header-content {
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  #mobile-nav-toggle {
    display: none;
    background: none;
    border: none;
    padding: 0.5rem;
    cursor: pointer;
    color: var(--text-primary);
    font-size: 1.5rem;
    border-radius: 4px;
    transition: all 0.2s ease;
  }

  #mobile-nav-toggle i {
    pointer-events: none;
    display: block;
  }

  #mobile-nav-toggle:hover {
    background-color: var(--bg-interactive);
  }

  @media (max-width: 1300px) {
    #mobile-nav-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
    }
  }

  #theme-toggle {
    background: none;
    border: none;
    padding: 0.5rem;
    cursor: pointer;
    color: var(--text-primary);
    font-size: 1.25rem;
    border-radius: 4px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #theme-toggle:hover {
    background-color: var(--bg-interactive);
  }

  #theme-toggle:active {
    background-color: var(--bg-secondary);
  }

  /* Show/hide icons based on theme */
  [data-theme="dark"] .light-icon,
  :root:not([data-theme="dark"]) .dark-icon {
    display: none;
  }

  /* GitHub Star Button */
  .github-star {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    color: white;
    text-decoration: none;
    background: linear-gradient(
      135deg,
      var(--spike-blue),
      var(--spike-dark-green)
    );
    border-radius: 20px;
    transition: all 0.2s ease;
    font-size: 0.875rem;
    white-space: nowrap;
  }

  .github-star:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(var(--spike-blue-rgb), 0.3);
  }

  .github-star i {
    font-size: 1.1rem;
    animation: starBounce 2s infinite;
    color: #ffd700;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  }

  @keyframes starBounce {
    0%,
    100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.2);
    }
  }

  .github-star span {
    white-space: nowrap;
  }

  @media (max-width: 768px) {
    .github-star span {
      display: none;
    }

    .github-star {
      padding: 0.5rem;
    }
  }
</style>

<script>
  // Theme toggle functionality
  document.addEventListener("DOMContentLoaded", () => {
    const themeToggle = document.getElementById("theme-toggle");

    // Function to set theme
    function setTheme(theme) {
      document.documentElement.setAttribute("data-theme", theme);
      localStorage.setItem("theme", theme);
    }

    // Initialize theme
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme) {
      setTheme(savedTheme);
    } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
      setTheme("dark");
    }

    // Toggle theme on button click
    themeToggle.addEventListener("click", () => {
      const currentTheme = document.documentElement.getAttribute("data-theme");
      const newTheme = currentTheme === "dark" ? "light" : "dark";
      setTheme(newTheme);
    });

    // Listen for system theme changes
    window
      .matchMedia("(prefers-color-scheme: dark)")
      .addEventListener("change", (e) => {
        if (!localStorage.getItem("theme")) {
          setTheme(e.matches ? "dark" : "light");
        }
      });
  });
</script>


        <article>
            
        <h1 id="spike-security-model">SPIKE Security Model</h1>
<p>Here is a brief introduction to <strong>SPIKE</strong>’s security model.</p>
<h2 id="machine-as-the-trust-boundary">Machine as the Trust Boundary</h2>
<p><strong>SPIKE</strong> components are intended to be used as the foundation for
cloud native secrets management in a zero trust environment. <strong>SPIKE</strong>
supports Linux and the BSD family (<em>including macOS</em>). Windows is not currently
supported, though some early prototyping is a work in progress.</p>
<p><strong>SPIKE</strong> (<em>with the help of SPIFFE and SPIRE</em>) adheres to the zero trust
networking security model in which it is assumed that network communication is
hostile or presumably fully compromised. That said, it is also assumed that
the hardware on which *<strong>SPIKE</strong> components run, as well as its operators,
is trustworthy.</p>
<p>If the hardware is considered as an attack surface, or insider threats are
part of the threat model, then careful considerations should be made around
key components. The physical placement of <strong>SPIRE Server</strong>, <strong>SPIKE Nexus</strong>,
and <strong>SPIKE Keeper</strong>instances, and the security of their relevant configuration
parameters will be important.</p>
<h2 id="authentication-and-communication">Authentication and Communication</h2>
<ul>
<li>All inter-component communication is secured through <a href="https://spiffe.io/"><strong>SPIFFE</strong> mTLS</a>.</li>
<li>Components identify each other using their <strong>SVID</strong>s.</li>
<li>Network-level security is provided by <strong>SPIFFE</strong> mTLS.</li>
</ul>
<h2 id="trust-boundaries">Trust Boundaries</h2>
<p><strong>The primary trust boundary is at the machine level</strong>. Once the machine is
compromised, hardening <strong>SPIKE</strong> components will provide diminishing returns.
In that regard, both physical, and OS-level security is important.</p>
<p>For example, when the machine is compromised, an attacker with sufficient
privileges can observe and control the memory of <strong>SPIKE Nexus</strong>, or
<strong>SPIKE Keeper</strong>; they can inject their counterfeit workloads; they can modify
<strong>SPIRE</strong> and create their own registration entries</p>
<p>It’s also worth noticing that, since <strong>SPIKE Keeper</strong> backs ups the <strong>root key</strong>
in memory, if <strong>SPIKE Keeper</strong> is compromised, the machine can be considered
compromised.</p>
<p>For containerized deployments, both <strong>SPIKE Nexus</strong> and <strong>SPIKE Keeper</strong>
shall be hardened.</p>
<h2 id="threat-model-exceptions">Threat Model Exceptions</h2>
<p>The following are <strong>not</strong> considered part of <strong>SPIKE</strong>’s threat model:</p>
<ul>
<li>Protecting against the control of the storage backend: Any storage backend
is considered untrustworthy by <strong>SPIKE</strong>, so any data saved in the storage
backend is encrypted at rest, and only <strong>SPIKE Nexus</strong> can decrypt it.
An attacker can perform arbitrary operations against the storage backend,
It is not <strong>SPIKE</strong>’s responsibility to protect the storage backend itself;
<strong>SPIKE</strong> only ensures that an attacker accessing the storage backend cannot
reveal the data stored there.</li>
<li>Protecting against memory analysis of running system components: If an
attacker can inspect the memory state of any component, then they already have
direct access to the machine (<em>which is our primary trust boundary</em>). If this
happens, then the confidentiality of the data may be compromised. Preventing
memory analysis is a common system security best practice, and it is out
of scope for <strong>SPIKE</strong> to enforce such measures.
<ul>
<li>System administrators should implement the following security measures to
prevent memory analysis:
<ul>
<li>Set <code>/proc/sys/kernel/yama/ptrace_scope</code> to <code>2</code> or <code>3</code>:
<ul>
<li>Value <code>2</code> restricts <code>ptrace</code> to <code>root-only</code> access</li>
<li>Value <code>3</code> disables <code>ptrace</code> completely, offering maximum security</li>
</ul>
</li>
<li>Make this setting permanent by adding <code>kernel.yama.ptrace_scope = 2</code> to
<code>/etc/sysctl.d/10-ptrace.conf</code></li>
<li>Consider using <strong>SELinux</strong> or <strong>AppArmor</strong> profiles to further restrict
process debugging capabilities</li>
<li>If running in a container, ensure the container runtime is configured to
disable ptrace capabilities (<em>e.g.,
using <code>--security-opt=no-new-privileges</code> in Docker</em>)</li>
<li>Regular audit of processes with <code>CAP_SYS_PTRACE</code> capability, as this can
bypass ptrace restrictions</li>
</ul>
</li>
</ul>
</li>
<li>Protecting against malicious code execution on the underlying host system.
This is again the system administrator’s responsibility. <strong>SPIKE</strong> cannot
protect against malicious code execution as that ability likely requires
administrative privileges, which should be avoided for <strong>SPIKE</strong> components
in the first place to prevent privilege escalation.</li>
<li>Protecting against the underlying system’s flaws. The systems shall be
up to date with respect to dependencies, properly secured, monitored, and
hardened.</li>
<li>Protecting against ill intent of <strong>SPIKE</strong> super admins: <strong>SPIKE</strong> assumes
trust for super administrators. Any malicious actions performed by super
admins, such as abusing their elevated privileges, are considered out of
scope for <strong>SPIKE</strong>’s threat model. It is the organization’s responsibility
to enforce proper checks, balances, and monitoring mechanisms for super
admin activities.</li>
<li>Protecting against <strong>SPIKE</strong> administrators supplying vulnerable or malicious
configuration data. This includes both intentional or unintentional
misconfiguration—an administrator is supposed to know what they are doing.
Any data provided as configuration values to <strong>SPIKE</strong> should be
validated. Misconfiguration of <strong>SPIKE</strong>, or <strong>SPIFFE</strong> can result in the
compromise of the confidentiality or the integrity of the data stored.</li>
</ul>
<h2 id="the-backing-store-is-untrusted">The Backing Store is Untrusted</h2>
<p>Since the storage backend resides outside the trusted boundary, <strong>SPIKE</strong>
treats it as untrusted and encrypts data before sending it. This ensures that
even if a malicious attacker gains access to the storage backend, the data
remains secure, as it can only be decrypted by <strong>SPIKE Nexus</strong>.</p>
<p>Additionally, the storage backend serves as a durable, persistent layer,
ensuring data availability across application crashes and server restarts.</p>
<p>Especially when using an external data store other than the default local
SQLite backing store, although SPIKE assumes the store is untrusted,
still considering the following will be prudent:</p>
<ul>
<li>If possible, have SPIKE’s backing store as an isolated database not shared
by any other service to reduce the attack surface.</li>
<li>If that’s not possible and the backing store is a shared database with other
services, be aware of who else has access to it and manages it?</li>
<li>Be cognizant about how SPIKE Nexus will authenticate to this database.</li>
<li>Make sure the database connection is secure with TLS or mTLS.</li>
</ul>
<h2 id="network-isolation-of-spike-keepers">Network Isolation of SPIKE Keepers</h2>
<p>SPIKE Keepers do not have any communication pathway between each other, and this
is a decision by design. This significantly limits the possibility of lateral
movements as even when an attacker gains a foothold on a SPIKE Keeper instance,
they cannot laterally move to other SPIKE Keeper instances.</p>
<p>SPIKE Nexus and SPIKE Keepers establish a hub-spoke topology where SPIKE
Keepers (the spokes) can only communicate with SPIKE Nexus (the hub).</p>
<h2 id="spike-keeper-shard-distribution-and-disaster-recovery">SPIKE Keeper Shard Distribution and Disaster Recovery</h2>
<p><strong>SPIKE</strong> uses <strong>SPIKE Keeper</strong>s, which are apps responsible for storing
<a href="https://en.wikipedia.org/wiki/Shamir%27s_secret_sharing" title="Shamir&#39;s Secret Sharing">Shamir shards</a> of the <strong>root key</strong>. Both the <strong>root key</strong> and the
<strong>shards</strong> are always in memory and <strong>never</strong> persisted to disk.</p>
<p><strong>SPIKE Nexus</strong> can establish a SPIFFE-based mTLS connection to request a shard
from a <strong>SPIKE Keeper</strong>, enabling the system to auto-recover itself.</p>
<p>The security model allows for different levels of redundancy and control:</p>
<ul>
<li>A typical setup could involve three <strong>SPIKE Keeper</strong> instances. No single
share can reconstruct the root key alone, ensuring security. However, multiple
shares can be combined to restore the system when needed.</li>
<li><strong>SPIKE Nexus</strong> often automatically recovers itself from crashes using
<strong>SPIKE Keeper</strong>s. However, for the unlikely case of a total system crash,
each administrator can hold one of these shares and use <code>spike restore</code> to
restore the system back to normal. Since, a single shard cannot recreate
the root key, we are mitigating risk by distributing trust.</li>
<li>For those less concerned with strict separation, an alternative approach
could involve storing both shares on a single thumb drive or distributing
two shares across separate thumb drives in different safes. This trade-off
balances security with recovery convenience.</li>
</ul>
<p>Ultimately, the design offers flexibility, allowing organizations to choose
their preferred level of security while considering the operational impact of
disaster recovery.</p>
<h2 id="key-management">Key Management</h2>
<ul>
<li>The system assumes a long-lived, well-guarded, initial <strong>root key</strong>.
<ul>
<li>The root key will be periodically rotated, but still, it will be
<strong>long-lived</strong>.</li>
</ul>
</li>
<li>The <strong>root key</strong> is automatically generated by <strong>SPIKE Nexus</strong>, and it’s
<strong>never</strong> stored on disk in plain text (<em>i.e., it always lives in memory</em>)</li>
<li>An administrator with adequate privileges can use <code>spike recover</code> to save
<a href="https://en.wikipedia.org/wiki/Shamir%27s_secret_sharing" title="Shamir&#39;s Secret Sharing">Shamir Shards</a> in an encrypted medium out-of-band for future
break-the-glass disaster recovery.</li>
<li>Root key rotation will also re-encrypt the secrets.</li>
</ul>
<h2 id="workload-access">Workload Access</h2>
<p>Workloads can securely access their secrets and perform lifecycle operations
(<em>e.g., create, delete, and modify secrets</em>) based on access policies defined
by an administrator (<em>using the <code>spike policy</code> command</em>). These policies
specify what a workload is allowed to do with the secrets managed by
<strong>SPIKE Nexus</strong>.</p>
<ul>
<li><strong>Default Deny:</strong> By default, access to <strong>SPIKE Nexus</strong> is prohibited. Only
super administrators have full access by default.</li>
<li><strong>Policy Enforcement:</strong> Workloads require a valid, explicitly defined policy
to perform any lifecycle operation on paths that contain secrets.</li>
<li><strong>Controlled Operations:</strong> The access policies strictly govern operations such
as creating, deleting, or modifying secrets.</li>
<li><strong>Access Scoping:</strong> Policies can define the scope and level of access (<em>e.g.,
read-only or full access</em>) on specific secret paths for each workload.</li>
</ul>
<p>This ensures that workloads only access or modify the secrets they are
explicitly permitted to, in accordance with their predefined policies.</p>
<h2 id="administrative-access">Administrative Access</h2>
<p>Although <strong>SPIKE</strong> uses policy-based access to secrets and administrative
operations, <strong>SPIKE Nexus</strong> recognizes certain builtin SPIFFE IDs and assigns
them predefined roles:</p>
<ul>
<li>Administrative access is granted using special SPIFFE IDs:
<ul>
<li><code>spiffe://$trustRoot/spike/pilot/role/superuser</code>: Super Admin. Can do
everything but recovery or restore operations.</li>
<li><code>spiffe://$trustRoot/spike/pilot/role/recover</code>: Recovery user. Can <strong>only</strong>
recover the root key shards to the local file system.</li>
<li><code>spiffe://$trustRoot/spike/pilot/role/restore</code>: Restore user. Can <strong>only</strong>
restore the root key by providing one shard at a time.</li>
</ul>
</li>
</ul>
<p>This gives us the flexibility to have separate users own distinct operational
responsibilities. For example, a specific operator may only restore the system
upon an unexpected crash, but they may not have the right to define access
policies for secrets.</p>
<p>This separation also provides better auditability.</p>
<ul>
<li>Once the system is initialized, accidental re-initialization is prevented.
<ul>
<li>For emergencies the admin user can use an out-of-band script to
“<em>factory-reset</em>” <strong>SPIKE</strong>.</li>
</ul>
</li>
</ul>
<h2 id="multi-admin-support">Multi-Admin Support</h2>
<p>Other than the three predefined roles (<em>superuser, recover, restore</em>), named
admin access to the system would only be possible using an external identity
manager such as an OIDC provider.</p>
<p><strong>SPIKE</strong> focuses on secure and efficient secret storage. It delegates access
and identity management to established standards like OIDC, keeping
authentication concerns out of scope.</p>
<h2 id="security-of-spike-binaries">Security of SPIKE Binaries</h2>
<p><strong>SPIKE</strong> takes several measures to ensure the security of its binary
distributions:</p>
<ul>
<li><strong>Symbol Stripping</strong>: Release binaries have symbols stripped to reduce attack
surface and minimize information leakage that could be used in exploitation
attempts.</li>
<li><strong>Cryptographic Verification</strong>: All official SPIKE releases include SHA256
checksums that users should verify before installation. This ensures the
integrity of the binaries and confirms they haven’t been tampered with during
distribution.
<ul>
<li><strong>Verification Process</strong>: Users can verify the integrity of downloaded
binaries using the following command: <code>sha256sum -c spike-v$version.sha256</code>.
Or, on macOS: <code>shasum -a 256 -c spike-v0.4.0.sha256</code>.</li>
</ul>
</li>
<li><strong>Transparency</strong>: All release artifacts and their corresponding checksums are
publicly available on <a href="https://github.com/spiffe/spike/releases" title="SPIKE Releases">the official GitHub releases page</a>,
allowing for community verification and trust.</li>
</ul>
<p>&nbsp;</p>
<hr />
<ul>
<li><a href="https://spike.ist/architecture/system-overview/"><strong>SPIKE</strong> System Overview</a></li>
<li><a href="https://spike.ist/architecture/security-model/"><strong>SPIKE</strong> Security Model</a></li>
<li><a href="https://spike.ist/architecture/architectural-decision-records/"><strong>SPIKE</strong> Architectural Decision Records</a></li>
</ul>
<hr />
<ul>
<li><a href="https://spike.ist/about/">About</a></li>
<li><a href="https://spike.ist/community/">Community</a></li>
<li><a href="https://spike.ist/getting-started/">Getting Started</a></li>
<li><a href="https://spike.ist/usage/">Using SPIKE</a></li>
<li><a href="https://spike.ist/development/">Developing SPIKE</a></li>
<li><a href="https://spike.ist/architecture/">SPIKE Architecture</a></li>
<li><a href="https://spike.ist/tracking/">Tracking</a></li>
<li><a href="https://spike.ist/operations/">Operations</a></li>
</ul>

    
        </article>

        <footer id="footer">
            Copyright © 2024-present <strong>SPIKE Contributors</strong>.<br>
            <strong>SPIKE</strong>'s code
            is distributed under <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache (v2.0)</a>.
            <br>
            The documentation on this website
            is distributed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a>.
            <br><br>
            We <strong>do not</strong> collect your data.
            This site <strong>does not</strong> use any tracking cookies or scripts.
        </footer>
    </div>

</main>


    <script type="text/javascript" src="https://spike.ist/elasticlunr.min.js" defer></script>
    <script type="text/javascript" src="https://spike.ist/search_index.en.js" defer></script>
<script type="text/javascript" src="https://spike.ist/js.js" defer></script>
</body>
</html>
<style>
body {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
    font-family: var(--font-family);
    background-color: var(--bg-primary);
    color: var(--text-primary);
}

main {
    width: 100vw;
    max-width: 1920px;
    display: flex;
    flex-direction: row;
    overflow: hidden;
}

#footer {
    text-align: center;
    padding: 2rem;
    font-size: 0.875rem;
    color: var(--text-muted);
    border-top: 1px solid var(--border-color);
    margin-top: 2rem;
}

.content {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100vh;
    overflow-y: auto;
    background-color: var(--bg-primary);
    line-height: 1.6;
    border-left: 1px solid var(--border-color);
}

#footer a {
    color: var(--spike-blue);
    text-decoration: none;
    transition: all 0.2s ease;
    border-bottom: 1px solid transparent;
    font-weight: 500;

}

#footer a:hover {
    border-bottom-color: var(--spike-blue);
}

</style>